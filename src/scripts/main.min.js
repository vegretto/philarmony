"use strict";$(document).ready((function(){var e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);var t=e.offsetWidth-e.clientWidth;e.remove();var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=window.chrome,i=window.navigator,r=i.vendor,s=void 0!==window.opr,n=i.userAgent.indexOf("Edge")>-1;null!=o&&"Google Inc."===r&&!1===s&&!1===n?e():t()},i=function(e,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$("body"),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];i.append('<div class="clickable-bg"></div>'),r&&$("body").css({"padding-right":t,"overflow-y":"hidden"}),e&&$(".clickable-bg").addClass("clickable-bg--dark").fadeOut(1).fadeIn(400),$(".clickable-bg").on("click",(function(){$(this).remove(),o&&(o.removeClass("opened"),r&&$("body").css({"padding-right":0,"overflow-y":"auto"}))}))};$(".js-open-modal").on("click",(function(e){e.preventDefault();var t=$(this).attr("data-modal");$("#".concat(t)).addClass("opened").fadeOut(1).fadeIn(400),i(!0,$("#".concat(t)),$("#".concat(t)))})),$(".js-close-modal").on("click",(function(){var e=$(this).parents(".modal");e.removeClass("opened"),$("body").css({"padding-right":0,"overflow-y":"auto"}),e.find(".clickable-bg").remove()})),$(".js-main-slider").slick({autoplay:!0,autoplaySpeed:4e3,prevArrow:$(".main-block-wrapper .pretty-arrow--prev"),nextArrow:$(".main-block-wrapper .pretty-arrow--next")}),$(".js-history-slider").slick({infinite:!1,prevArrow:$(".history-slider__wrapper .history-slider__arrow-wrapper--prev"),nextArrow:$(".history-slider__wrapper .history-slider__arrow-wrapper--next"),speed:350}),$(".js-history-slider").on("afterChange",(function(){var e=$(".slick-current"),t=e.next().find(".history-slider__slide-year").text(),o=e.prev().find(".history-slider__slide-year").text();$(".history-slider__arrow-wrapper--prev .history-slider__side-year").text(o),$(".history-slider__arrow-wrapper--next .history-slider__side-year").text(t)}));var r=$(".filters__datepicker-day").outerWidth(),s=$(".js-datepicker-day-slider").outerWidth(),n=Math.round(s/r);function a(e,t){var o=document.createElement("script");o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,t())}:o.onload=function(){t()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}$(".js-datepicker-day-slider").slick({infinite:!1,slidesToShow:n,slidesToScroll:7,swipe:!1,prevArrow:$(".filters__datepicker-wrapper .common-arrow--prev"),nextArrow:$(".filters__datepicker-wrapper .common-arrow--next"),responsive:[{breakpoint:599,settings:{slidesToScroll:1,swipe:!0,prevArrow:null,nextArrow:null,swipeToSlide:!0}}]}),$(".js-gallery-slider").slick({slidesToShow:3,slidesToScroll:1,variableWidth:!0,centerMode:!0,swipeToSlide:!0,touchThreshold:10,prevArrow:$(".gallery-slider-wrapper .pretty-arrow--prev"),nextArrow:$(".gallery-slider-wrapper .pretty-arrow--next"),responsive:[{breakpoint:599,settings:{slidesToShow:1,variableWidth:!1,centerMode:!0}}]}),$(".js-open-mobile-menu").on("click",(function(){$(".mobile-menu").addClass("opened"),i(!0,$(".mobile-menu"))})),$(".js-close-mobile-menu").on("click",(function(){$(".mobile-menu").removeClass("opened"),$(".clickable-bg").remove(),$("body").css({"padding-right":t,"overflow-y":"auto"})}));var l=[{id:"map-single"},{id:"map-multi"}];function d(){l.forEach((function(e){var t,o,i,r;$("#"+e.id).length>0&&(t=e.id,o=$("#"+t).attr("data-json"),i=[],r=[0,0],$.getJSON(o,(function(e){var o=e.length;e.forEach((function(e){var t='<div class="custom-balloon">\n                                <div class="custom-balloon__text"><b>'.concat(e.name,'</b></div>\n                                <div class="custom-balloon__text">').concat(e.address,"</div>\n                         </div>"),o=new ymaps.Placemark(e.coords,{balloonContent:t},{iconLayout:"default#image",iconImageHref:"img/svg/point.svg",iconImageSize:[50,60],iconOffset:[-15,-30],balloonOffset:[-2,-65],hideIconOnBalloonOpen:!1});i.push(o),r[0]+=Number(e.coords[0]),r[1]+=Number(e.coords[1])})),r[0]=r[0]/o,r[1]=r[1]/o;var s=new ymaps.Map(t,{center:r,zoom:1===o?16:10,controls:["zoomControl"]});i.forEach((function(e){s.geoObjects.add(e)})),s.behaviors.disable("scrollZoom")})))}))}var c=!1;if($(".map-container").length>0&&(c||(c=!0,a("https://api-maps.yandex.ru/2.1/?apikey=04709a29-6f21-442a-9cb5-272b39900456&lang=ru_RU",(function(){ymaps.ready(d)})))),$(".js-unfold-nav").on("click",(function(){$(".header__secondary-nav-wrapper").slideToggle().toggleClass("opened"),$(this).toggleClass("opened")})),screen.width>=991){var p=$(".header__secondary-nav-wrapper"),m=$(".header"),h=m.height(),f=h-p.height();$(document).on("scroll",(function(){$(document).scrollTop()>=h&&!m.hasClass("folded")?(m.addClass("folded"),h=f,o(void 0,(function(){$(".header__logo-box").css({height:h})})),p.hasClass("opened")||p.hide()):$(document).scrollTop()<h&&m.hasClass("folded")&&(m.removeClass("folded"),h=m.height(),o(void 0,(function(){$(".header__logo-box").css({height:h})})),p.show())}))}screen.width<=600&&$(".history-slider").length>0&&($(".history-slider__arrow-wrapper").css("top",$(".history-slider__img").position().top+$(".history-slider__img").height()+50),$(window).on("resize",(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout((function(){console.log(123),$(".history-slider__arrow-wrapper").css("top",$(".history-slider__img").position().top+$(".history-slider__img").height()+50)}),250)})));var v=function(e,t,o){if(null!=document.getElementById(e)){var i=new CircleType(document.getElementById(e)).radius(t);screen.width<768&&i.radius(o)}};v("js-circle-text",155,140),$("#js-circle-text").css("transform","rotate(-30deg)"),v("js-show-more-circle",60,60);var u=function(e,t,o){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(screen.width<o)if(r)for(var s=0;s<$(e).length;s++)$(t).eq(s).after($(e).eq(1===$(t).length?0:s));else if(i)for(var n=0;n<$(e).length;n++)$(e).eq(n).appendTo($(t).eq(1===$(t).length?0:n));else for(var a=0;a<$(e).length;a++)$(e).eq(a).prependTo($(t).eq(1===$(t).length?0:a))};u(".main-block__infobox",".main-block__item-content",768),u(".events-item__type",".events-item__bottom",600,!1),u(".events-item__duration",".events-item__title",600,!1,!0),u(".filters__item.mobile-move",".filters__dropdown.mobile-only .filters__dropdown-box-inner",600),u(".filters__events-num",".filters__dropdowns",600),$(".filters__events-num span").text("Событий:"),u(".labels--main-block",".main-block__item-img",767),u(".main-block--event .labels--static",".main-block__item-img",767),u(".main-block--event .main-block__infobox-price",".main-block__infobox-duration",767,!1,!0),screen.width<992&&$(".events-item--horizontal .events-item__left").each((function(){$(this).removeClass("events-item__left").addClass("events-item__top-content"),u($(this),$(this).parents(".events-item").find(".events-item__img"),991,!1,!0)})),u(".events-item--horizontal .events-item__bottom-right .events-item__inner",".events-item--horizontal .events-item__top-content",991,!0),u(".events-item--horizontal .events-item__additional-dates",".events-item--horizontal .events-item__bottom",991,!0),u(".events-item--horizontal .common-btn--blue",".events-item--horizontal .events-item__bottom-box",991,!0),u(".main-person__dignity",".main-person__info",991,!1);var _=function(e,t,o){var i=0,r=e.length;$(document).on("scroll.".concat(t),(function(){e.each((function(){(i=o($(this),i))>=r&&$(document).off("scroll.".concat(t))}))}))};screen.width>1199&&_($(".infoblock__img"),"scroll.infoblock",(function(e,t){return e.visible(!0)&&!e.hasClass("visible")&&(e.parents(".infoblock__img-wrapper").find(".infoblock__img").addClass("visible"),t+=2),t})),_($(".big-links-block--style2 .big-links__item"),"scroll.biglinks",(function(e,t){return e.visible(!0)&&!e.hasClass("visible")&&(e.addClass("visible"),t++),t}));var g=$(".playlists__item");o((function(){g.each((function(){var e=$(this).find("iframe");e.attr("src",e.attr("data-src"))}))}),(function(){_(g,"scroll.playlist",(function(e,t){if(e.visible(!0)){var o=e.find("iframe");void 0===o.attr("src")&&o.attr("src",o.attr("data-src")),t++}return t}))})),screen.width<=600&&$(".js-footer-dropdown").on("click",(function(){var e=$(this).next(".footer__nav--mobile-folded");$(this).next(".footer__nav--mobile-folded").slideToggle({start:function(){$(this).css("display","block")}}).toggleClass("opened"),e.css("display","block"),$(this).toggleClass("opened")})),$(".js-open-dropdown").on("click",(function(){$(".js-open-dropdown").removeClass("opened");var e=$(this).parent().find(".js-dropdown");e.hasClass("opened")?(e.removeClass("opened"),$(".clickable-bg").remove()):($(".js-dropdown.opened").removeClass("opened"),e.toggleClass("opened"),$(".clickable-bg").remove(),i(!1,e,$("body"),!1))})),$(".js-toggle-active").on("click",(function(){$(this).toggleClass("active")})),$(".filters__view").on("click",(function(){$(".filters__view").removeClass("active"),$(this).addClass("active")})),$(".js-clear").on("click",(function(){$(".filters__item, .filters__datepicker-month-item").removeClass("active"),$(".filters__datepicker-day").removeClass("selected in-range start-date end-date")}));var b=!1,w=!1;$('.filters__datepicker-day:not(".filters__datepicker-day--breaker")').on("click",(function(){if(w&&($(".filters__datepicker-day").removeClass("selected in-range start-date end-date"),b=!1,w=!1),$(this).hasClass("selected"))$(this).removeClass("selected");else if($(this).addClass("selected"),b){$(this).addClass("end-date"),w=!0;var e=$(".filters__datepicker-day.start-date").parents(".slick-slide"),t=$(this).parents(".slick-slide");Number(e.attr("data-slick-index"))<Number(t.attr("data-slick-index"))?e.nextUntil(t).each((function(){$(this).find($(".filters__datepicker-day")).addClass("in-range")})):e.prevUntil(t).each((function(){$(this).find($(".filters__datepicker-day")).addClass("in-range")}))}else $(this).addClass("start-date"),b=!0})),$(".js-read-more-toggle").on("click",(function(){var e=$(this).prev(".js-read-more-wrapper").find($(".js-read-more-container")).height();$(this).hasClass("opened")?($(this).prev(".js-read-more-wrapper").animate({height:220},300),$(this).removeClass("opened")):($(this).prev(".js-read-more-wrapper").animate({height:e},300),$(this).addClass("opened"))})),screen.width>1199&&($(".js-swipe-scroll").each((function(){!function(e){var t=document.querySelector(e);if(null!==t){t.style.cursor="grab";var o=!1,i={top:0,left:0,x:0,y:0},r=function(e){var r=e.clientX-i.x,s=e.clientY-i.y;t.scrollTop=i.top-s,t.scrollLeft=i.left-r,o=!0},s=function e(o){t.style.cursor="grab",t.style.removeProperty("user-select"),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)};t.querySelectorAll(e+"> *").forEach((function(e){e.addEventListener("click",(function(e){o&&e.preventDefault(),o=!1}))})),$(e).on("dragstart",(function(){return!1})),t.addEventListener("mousedown",(function(e){t.style.cursor="grabbing",t.style.userSelect="none",i={left:t.scrollLeft,top:t.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)}))}}(".".concat($(this).attr("class").split(/\s+/)[0]))})),$(".js-swipe-scroll > *").attr("draggable","false"),$(".js-swipe-scroll img").attr("draggable","false"));var y=$("#virtual-tour-box");y.length>0&&a("/data/virtual-tour/tour.js",(function(){var e=y.attr("data-swf"),t=y.attr("data-xml");embedpano({swf:e,xml:t,target:"virtual-tour-box",html5:"auto",passQueryParameters:!0})})),$(".js-scroll-to").on("click",(function(e){e.preventDefault();var t=$(this).attr("href");$([document.documentElement,document.body]).animate({scrollTop:$(t).offset().top-$("header").height()},1e3)})),$(".js-checkbox").on("click",(function(e){if("a"!==e.target.tagName.toLowerCase()){e.preventDefault();var t=$(this).find(".custom-checkbox").prop("checked");$(this).toggleClass("checked").find(".custom-cb-badge").toggleClass("checked"),$(this).find(".custom-checkbox").prop("checked",!t)}}));var k;$(".js-scroll-watch").length>0&&(k=$(".js-scroll-watch"),$(window).on("scroll",(function(){var e=$(window).scrollTop();k.each((function(){var t=$(this),o=$(".header").outerHeight()+1,i=$(t.attr("href"));i.position().top-o<=e&&t.offset().top+i.height()>e?(k.removeClass("current"),t.addClass("current")):t.removeClass("current")}))})))}));
//# sourceMappingURL=main.min.js.map
